(this["webpackJsonpsimple-mern-passport"]=this["webpackJsonpsimple-mern-passport"]||[]).push([[0],{48:function(e,t,a){e.exports=a(86)},52:function(e,t,a){},79:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);a(49),a(50),a(52);var n=a(0),c=a.n(n),r=a(45),o=a.n(r),l=a(2),s=a(3),i=a(5),m=a(4),d=a(1),u=a(15),p=a(12),h=a.n(p),b=a(13),f=h.a.create({baseURL:"/"}),v=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(b.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a=e.state;(function(e){var t=e.username,a=e.password,n=e.name;return new Promise((function(e,c){f.post("/user/signup",{username:t,password:a,name:n}).then((function(t){var a=t.data;e(a)})).catch((function(e){c(e)}))}))})({username:a.username,password:a.password,name:a.name}).then((function(t){e.props.updateUser({loggedIn:!0,user:t}),e.setState({redirectTo:"/"})})).catch((function(e){console.log(e)}))},e.state={username:"",password:"",confirmPassword:"",name:"",redirectTo:null},e}return Object(s.a)(a,[{key:"render",value:function(){return this.state.redirectTo?c.a.createElement(u.a,{to:{pathname:this.state.redirectTo}}):c.a.createElement("div",{className:"container mt-4"},c.a.createElement("h4",null,"Sign up"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group text-left"},c.a.createElement("label",{htmlFor:"username"},"Email address"),c.a.createElement("input",{type:"email",className:"form-control",autoComplete:"username",id:"username",name:"username","aria-describedby":"emailHelp",value:this.state.username,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group text-left"},c.a.createElement("label",{htmlFor:"name"},"Name"),c.a.createElement("input",{type:"text",id:"name",name:"name","aria-describedby":"emailHelp",className:"form-control",value:this.state.name,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group text-left"},c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",autoComplete:"new-password",className:"form-control",id:"password",name:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleSubmit},"Sign Up")))}}]),a}(n.Component),E=a(18),g=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={username:"",password:"",redirectTo:null},e.handleSubmit=e.handleSubmit.bind(Object(E.a)(e)),e.handleChange=e.handleChange.bind(Object(E.a)(e)),e}return Object(s.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(b.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state;(function(e){var t=e.username,a=e.password;return new Promise((function(e,n){f.post("/user/login",{username:t,password:a}).then((function(t){var a=t.data;e(a)})).catch((function(e){n(e)}))}))})({username:a.username,password:a.password}).then((function(e){t.props.updateUser({loggedIn:!0,user:e}),t.setState({redirectTo:"/"})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.redirectTo?c.a.createElement(u.a,{to:{pathname:this.state.redirectTo}}):c.a.createElement("div",{className:"container mt-4"},c.a.createElement("h4",null,"Login"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group text-left"},c.a.createElement("label",{htmlFor:"username"},"Email address"),c.a.createElement("input",{type:"email",className:"form-control",id:"username",autoComplete:"username",name:"username","aria-describedby":"emailHelp",value:this.state.username,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group text-left"},c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",autoComplete:"current-password",className:"form-control",id:"password",name:"password",value:this.state.password,onChange:this.handleChange})),c.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleSubmit},"Login")))}}]),a}(n.Component),C=(a(79),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).logout=function(e){e.preventDefault(),new Promise((function(e,t){f.post("/user/logout").then((function(t){e(t)})).catch((function(e){t(e)}))})).then((function(e){200===e.status&&(n.props.updateUser({user:null}),n.setState({redirectTo:"/"}))})).catch((function(e){console.log(e)}))},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.user;return c.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},c.a.createElement(d.b,{to:"/",className:"btn btn-link text-secondary"},c.a.createElement("i",{class:"fas fa-coffee"})),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNav"},e?c.a.createElement("ul",{className:"navbar-nav"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(d.b,{to:"#",className:"btn btn-link text-secondary",onClick:this.logout},c.a.createElement("span",{className:"text-secondary"},"Log Out")))):c.a.createElement("ul",{className:"navbar-nav"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(d.b,{to:"/signup",className:"btn btn-link"},c.a.createElement("span",{className:"text-secondary"},"Sign up"))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(d.b,{to:"/login",className:"btn btn-link text-secondary"},c.a.createElement("span",{className:"text-secondary"},"Login"))))))}}]),a}(n.Component)),y=h.a.create({baseURL:"/board"}),N=h.a.create({baseURL:"/post"}),w=h.a.create({baseURL:"/collection"}),x=function(e){var t=e.name;return new Promise((function(e,a){w.post("/add",{name:t}).then((function(t){var a=t.data;e(a)})).catch((function(e){a(e)}))}))},j=function(){return new Promise((function(e,t){w.get("/load").then((function(t){var a=t.data;e(a)})).catch((function(e){t(e)}))}))},O=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){j().then((function(e){n.setState({collections:e.data.collections})})).catch((function(e){console.log(e)}))},n.state={redirectTo:null,collections:null},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.user,t=this.state.collections;return this.state.redirectTo?c.a.createElement(u.a,{to:{pathname:this.state.redirectTo}}):c.a.createElement("div",null,t&&(e?c.a.createElement("div",{className:"container"},c.a.createElement(d.b,{to:"/collection/add"},c.a.createElement("i",{class:"fas fa-plus-circle fa-2x text-right d-block mt-5"})),t.length>0?c.a.createElement("div",{class:"container mt-4"},c.a.createElement("div",{class:"row"},t.map((function(e){return c.a.createElement("div",{class:"col-6 col-md-4 mt-4"},c.a.createElement("div",{class:"board-card"},c.a.createElement(d.b,{to:"/collection/".concat(e._id),class:"h1"},e.name)))})))):c.a.createElement("h1",{className:"text-center"},"Add some collections!")):c.a.createElement("div",{class:"container text-center"},c.a.createElement("h1",null,"Sign up or Log in to Get Started!"))))}}]),a}(n.Component),k=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault();n.state.link.includes("youtube.com")||(n.state.link.includes("jpg")||n.state.link.includes("png"));var t=n.state,a=t.link,c=t.name,r=t.description,o=n.props.match.params.boardId;(function(e){var t=e.link,a=e.name,n=e.description,c=e.board;e.type;return new Promise((function(e,r){N.post("/add",{link:t,name:a,description:n,board:c}).then((function(t){var a=t.data;e(a)})).catch((function(e){r(e)}))}))})({link:a,name:c,description:r,board:o}).then((function(e){n.setState({redirectTo:"/board/".concat(o)})})).catch((function(e){console.log(e)}))},n.state={link:"",name:"",description:"",redirectTo:null},n}return Object(s.a)(a,[{key:"render",value:function(){return this.state.redirectTo?c.a.createElement(u.a,{to:{pathname:this.state.redirectTo}}):c.a.createElement("div",{class:"container my-5 form-container"},c.a.createElement("h1",{className:"text-center"},"Add new post"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group text-left"},c.a.createElement("label",{htmlFor:"link"},"Image Link"),c.a.createElement("input",{type:"text",className:"form-control",autoComplete:"link",id:"link",name:"link","aria-describedby":"emailHelp",value:this.state.link,onChange:this.handleChange})),c.a.createElement("div",{className:"form-group text-left"},c.a.createElement("label",{htmlFor:"name"},"Name"),c.a.createElement("input",{type:"text",className:"form-control",autoComplete:"name",id:"name",name:"name","aria-describedby":"emailHelp",value:this.state.name,onChange:this.handleChange})),c.a.createElement("label",{htmlFor:"description"},"Description"),c.a.createElement("textarea",{id:"description",name:"description",rows:"4",class:"w-100","aria-describedby":"emailHelp",value:this.state.description,onChange:this.handleChange}),c.a.createElement("button",{type:"submit",className:"btn btn-warning d-block mx-auto mt-3",onClick:this.handleSubmit},"Add")))}}]),a}(n.Component),S=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.name,c=t.description;x({name:a,description:c}).then((function(e){n.setState({redirectTo:"/collection/".concat(e.data.collections._id)})})).catch((function(e){console.log(e)}))},n.handleChange=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n.state={name:"",description:"",redirectTo:null},n}return Object(s.a)(a,[{key:"render",value:function(){return this.state.redirectTo?c.a.createElement(u.a,{to:{pathname:this.state.redirectTo}}):c.a.createElement("div",{class:"container my-5 form-container"},c.a.createElement("h1",{className:"text-center my-4"},"Add Collection"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group text-left"},c.a.createElement("label",{htmlFor:"name"},"Name"),c.a.createElement("input",{type:"text",className:"form-control",autoComplete:"name",id:"name",name:"name","aria-describedby":"emailHelp",value:this.state.name,onChange:this.handleChange})),c.a.createElement("label",{htmlFor:"description"},"Description"),c.a.createElement("textarea",{id:"description",class:"w-100",rows:"4",name:"description","aria-describedby":"emailHelp",value:this.state.description,onChange:this.handleChange}),c.a.createElement("button",{type:"submit",className:"btn btn-warning d-block mx-auto mt-3",onClick:this.handleSubmit},"Add")))}}]),a}(n.Component),T=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(b.a)({},e.target.name,e.target.value))},n.openForm=function(){var e=n.state.openForm;n.setState({openForm:!e})},n.handleSubmit=function(e){e.preventDefault();var t=n.state;(function(e){var t=e.name,a=e.description,n=e.collections;return new Promise((function(e,c){y.post("/add",{name:t,description:a,collections:n}).then((function(t){var a=t.data;e(a)})).catch((function(e){c(e)}))}))})({name:t.name,description:t.description,collections:null===n.state.collection?n.props.match.params.collectionID:n.state.collection}).then((function(e){console.log(e.data),n.setState({redirectTo:"/board/".concat(e.data.boards._id)})})).catch((function(e){console.log(e)}))},n.addCollection=function(e){e.preventDefault();var t=n.state.addCollection;x({name:t}).then((function(e){n.setState({newCollection:e.data.collections,collection:e.data.collections._id}),n.openForm()})).catch((function(e){console.log(e)}))},n.collection=function(e){"create"===e.target.value?n.openForm():n.setState({collection:e.target.value})},n.state={name:"",description:"",redirectTo:null,openForm:!1,addCollection:"",collection:null,newCollection:null},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t,a=this;return this.props.collections&&this.props.collections.length>0&&(e=this.props.collections.filter((function(e){return e._id===a.props.match.params.collectionID})),t=this.props.collections.filter((function(e){return e._id!==a.props.match.params.collectionID}))),this.state.redirectTo?c.a.createElement(u.a,{to:{pathname:this.state.redirectTo}}):this.props.collections&&c.a.createElement("div",{class:"container my-5 3-5 form-container"},!0===this.state.openForm&&c.a.createElement("div",{class:"container bg-secondary rounded"},c.a.createElement("label",null,"Name of Collection"),c.a.createElement("input",{type:"text",className:"form-control",autoComplete:"name",id:"collection",name:"addCollection","aria-describedby":"emailHelp",value:this.state.addCollection,onChange:this.handleChange}),c.a.createElement("button",{type:"submit",className:"btn btn-warning d-block mx-auto mt-3",onClick:this.addCollection},"Add")),c.a.createElement("h1",{className:"text-center"},"Add Board"),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group text-left"},c.a.createElement("div",null,c.a.createElement("label",{for:"sel1"},"Select Collection:"),c.a.createElement("select",{class:"form-control my-3",value:this.state.collection,onChange:this.collection},null!==this.state.newCollection&&c.a.createElement("option",{value:this.state.newCollection._id},this.state.newCollection.name),c.a.createElement("option",{value:e[0]._id},e[0].name),t.map((function(e,t){return c.a.createElement("option",{value:e._id},e.name)})),c.a.createElement("option",{value:"create"},"Create Collection"))),c.a.createElement("label",{htmlFor:"name"},"Name"),c.a.createElement("input",{type:"text",className:"form-control",autoComplete:"name",id:"name",name:"name","aria-describedby":"emailHelp",value:this.state.name,onChange:this.handleChange})),c.a.createElement("label",{htmlFor:"description"},"Description"),c.a.createElement("textarea",{id:"description",class:"w-100",rows:"4",name:"description","aria-describedby":"emailHelp",value:this.state.description,onChange:this.handleChange}),c.a.createElement("button",{type:"submit",className:"btn btn-warning d-block mx-auto mt-3",onClick:this.handleSubmit},"Add")))}}]),a}(n.Component),F=(a(80),function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){(function(e){var t=e.board;return new Promise((function(e,a){N.post("/load",{board:t}).then((function(t){var a=t.data;e(a)})).catch((function(e){a(e)}))}))})({board:n.props.match.params.id}).then((function(e){n.setState({posts:e.data.post})})).catch((function(e){console.log(e)}))},n.state={board:null,redirectTo:null,posts:null},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.match.params.id,t=this.state.posts;return this.state.redirectTo?c.a.createElement(u.a,{to:{pathname:this.state.redirectTo}}):c.a.createElement("div",{className:"container"},t&&c.a.createElement("div",{class:"container"},c.a.createElement(d.b,{to:"/".concat(e,"/post/add")},c.a.createElement("i",{class:"fas fa-plus-circle fa-2x text-right d-block mt-5"})),c.a.createElement("div",{class:"row align-items-center"},t.length>0?c.a.createElement("div",{class:"container mt-4 text-center"},c.a.createElement("div",{class:"row"},t.map((function(e){return c.a.createElement("div",{class:"col-6 col-md-4 mt-4"},c.a.createElement("img",{src:e.link,class:"card-img-top",alt:"..."}),c.a.createElement("div",{class:"card-body"},c.a.createElement("h4",{class:"card-title"},e.name),c.a.createElement("p",{class:"card-text"},e.description)))})))):c.a.createElement("h1",{className:"text-center"},"Add some posts!"))))}}]),a}(n.Component)),D=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){(function(e){var t=e.collection;return new Promise((function(e,a){y.post("/load",{collection:t}).then((function(t){var a=t.data;e(a)})).catch((function(e){a(e)}))}))})({collection:n.props.match.params.id}).then((function(e){n.setState({boards:e.data.boards})})).catch((function(e){console.log(e)}))},n.state={boards:null,redirectTo:null},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.boards,t=this.props.match.params.id;return this.state.redirectTo?c.a.createElement(u.a,{to:{pathname:this.state.redirectTo}}):c.a.createElement("div",{className:"container"},e&&c.a.createElement("div",{class:"container"},c.a.createElement(d.b,{to:"/".concat(t,"/board/add")},c.a.createElement("i",{class:"fas fa-plus-circle fa-2x text-right d-block mt-5"})),e.length>0?c.a.createElement("div",{class:"row align-items-center"},e.map((function(e){return c.a.createElement("div",{class:"col-6 col-md-4 mt-4"},c.a.createElement(d.b,{to:"/board/".concat(e._id)},c.a.createElement("div",{class:"card text-center",style:{width:"18rem"}},c.a.createElement("div",{class:"card-body"},c.a.createElement("h5",{class:"card-title"},e.name),c.a.createElement("p",{class:"card-text"},e.description)))))}))):c.a.createElement("h1",null,"Add Some Boards!")))}}]),a}(n.Component),U=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).componentDidMount=function(){e.getUser()},e.updateUser=function(t){e.setState(t)},e.getCollections=function(){j().then((function(t){t.data.collections.length>0&&e.setState({collections:t.data.collections})})).catch((function(e){console.log(e)}))},e.getUser=function(){h.a.get("/user/").then((function(t){t.data.user?(e.setState({user:t.data.user,loaded:!0}),e.getCollections()):e.setState({user:null,loaded:!0})}))},e.state={user:null,loaded:!1,collections:null},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return!0===this.state.loaded&&c.a.createElement(d.a,null,c.a.createElement(C,{updateUser:this.updateUser,user:this.state.user}),c.a.createElement(u.d,null,c.a.createElement(u.b,{exact:!0,path:"/",render:function(){return c.a.createElement(O,{user:e.state.user})}}),c.a.createElement(u.b,{exact:!0,path:"/:boardId/post/add",component:k}),c.a.createElement(u.b,{exact:!0,path:"/:collectionID/board/add",render:function(t){return c.a.createElement(T,Object.assign({},t,{collections:e.state.collections}))}}),c.a.createElement(u.b,{exact:!0,path:"/board/:id",component:F}),c.a.createElement(u.b,{exact:!0,path:"/collection/add",component:S}),c.a.createElement(u.b,{exact:!0,path:"/collection/:id",component:D}),c.a.createElement(u.b,{path:"/login",render:function(){return c.a.createElement(g,{updateUser:e.updateUser})}}),c.a.createElement(u.b,{path:"/signup",render:function(){return c.a.createElement(v,{updateUser:e.updateUser})}})))}}]),a}(n.Component);o.a.render(c.a.createElement(d.a,null,c.a.createElement(U,null)),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.6de17e4a.chunk.js.map